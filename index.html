<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SA Exam Master ‚Äî Mobile Optimized</title>
    <style>
        :root {
            --bg-body: #0f172a;
            --bg-panel: #1e293b;
            --bg-card: #334155;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #22c55e;
            --success-bg: rgba(34, 197, 94, 0.1);
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #475569;
            --code-bg: #020617;
            --header-height: 60px; /* Fixed height for calculations */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: calc(var(--header-height) + 20px); /* Prevents sticky header overlap */
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            font-size: 16px;
            overflow-x: hidden; /* Strictly prevent body side-scroll */
            width: 100%;
        }

        /* --- Layout Components --- */
        
        /* Mobile Header / Controls */
        .mobile-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            height: var(--header-height);
            padding: 0 1rem;
            gap: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        .menu-btn {
            background: none;
            border: none;
            color: var(--accent);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0 5px;
            flex-shrink: 0;
        }

        /* Scrollable Toolbar */
        .toolbar {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            white-space: nowrap;
            padding: 5px 0;
            flex: 1;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* IE 10+ */
        }
        .toolbar::-webkit-scrollbar { display: none; /* Chrome/Safari */ }

        .btn {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 0.4rem 0.8rem;
            border-radius: 20px; /* Pill shape for mobile */
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .btn.active { background: var(--accent); border-color: var(--accent); color: white; }
        .btn-primary { background: var(--accent); color: white; border-color: var(--accent); }

        /* Sidebar / Drawer */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 85%; /* Leave a gap on the right */
            max-width: 300px;
            height: 100vh;
            background: var(--bg-panel);
            z-index: 1000;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 10px 0 30px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
        }
        .sidebar.active { transform: translateX(0); }
        
        .overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(2px);
        }
        .overlay.active { opacity: 1; pointer-events: auto; }

        .sidebar-header { padding: 1.5rem; background: var(--code-bg); border-bottom: 1px solid var(--border); }
        .search-box {
            width: 100%; padding: 10px; margin-top: 10px;
            background: var(--bg-body); border: 1px solid var(--border);
            color: white; border-radius: 8px; font-size: 16px; /* Prevents iOS zoom on focus */
        }
        .toc-list { overflow-y: auto; flex: 1; list-style: none; padding-bottom: 2rem; }
        .toc-item a {
            display: block; padding: 1rem 1.5rem;
            color: var(--text-muted); text-decoration: none;
            border-bottom: 1px solid var(--bg-body);
        }
        .toc-item a:active { background: var(--bg-card); color: white; }

        /* Main Content */
        .main {
            padding: 1rem;
            padding-bottom: 4rem;
            width: 100%;
            max-width: 100%;
        }

        .hero h1 { font-size: 1.8rem; line-height: 1.2; margin-bottom: 0.5rem; color: var(--accent); }
        .hero p { font-size: 0.9rem; color: var(--text-muted); }

        /* Question Cards */
        .question-block {
            background: var(--bg-panel);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
            overflow: hidden; /* Clips content inside rounded corners */
        }
        
        .q-header { padding: 1.2rem; background: rgba(0,0,0,0.2); border-bottom: 1px solid var(--border); }
        .q-title { font-size: 1.3rem; font-weight: 700; color: var(--text-main); margin-bottom: 0.5rem; }
        .q-meta { display: flex; gap: 10px; font-size: 0.75rem; color: var(--text-muted); font-family: monospace; text-transform: uppercase; }
        .q-meta span { background: var(--bg-card); padding: 2px 6px; border-radius: 4px; }

        .deep-content { padding: 1.2rem; font-size: 0.95rem; }
        .deep-content p { margin-bottom: 1rem; text-align: left; }
        .deep-content ul, .deep-content ol { padding-left: 1.2rem; margin-bottom: 1rem; }
        .deep-content li { margin-bottom: 0.5rem; }

        /* Visuals & Code - Preventing Horizontal Scroll on Body */
        .vis-box {
            background: var(--code-bg);
            margin: 1rem -1.2rem; /* Pull to edges */
            padding: 1rem;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }
        
        pre.ascii-art {
            font-family: 'Courier New', monospace;
            font-size: 11px; /* Smaller font for mobile */
            line-height: 1.1;
            overflow-x: auto; /* Scroll ONLY the code block */
            white-space: pre;
            color: var(--success);
            padding-bottom: 10px;
        }

        svg.diagram {
            width: 100%;
            height: auto;
            max-height: 250px;
        }

        /* Helper Boxes */
        .checklist-box { background: var(--success-bg); padding: 1rem; border-radius: 8px; margin: 1rem 0; border: 1px solid var(--success); }
        .forget-box { background: rgba(239, 68, 68, 0.1); border-left: 3px solid var(--danger); padding: 1rem; margin: 1rem 0; }
        .wording-box { font-style: italic; font-family: serif; color: var(--text-muted); padding: 1rem; border: 1px dashed var(--border); border-radius: 8px; }

        /* Cheat Sheet Accordion */
        .cheat-sheet { margin: 1rem 0; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
        .cs-header { padding: 1rem; background: var(--bg-card); font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .cs-body { display: none; padding: 1rem; background: var(--bg-panel); border-top: 1px solid var(--border); }
        .cs-body.show { display: block; }
        .cs-body ul { columns: 1; padding-left: 1.2rem; } /* Single column for mobile */

        /* Modes */
        body.revision-mode .deep-content, body.revision-mode .vis-box { display: none; }
        body.revision-mode .cs-body { display: block; }
        
        body.diagrams-only .deep-content, 
        body.diagrams-only .checklist-box, 
        body.diagrams-only .forget-box, 
        body.diagrams-only .cheat-sheet { display: none; }

        /* Desktop tweaks just in case */
        @media (min-width: 769px) {
            .sidebar { transform: translateX(0); width: 300px; border-right: 1px solid var(--border); }
            .main { margin-left: 300px; max-width: calc(100% - 300px); }
            .menu-btn { display: none; }
            .overlay { display: none; }
            .cs-body ul { columns: 2; }
        }
    </style>
</head>
<body>

    <div class="overlay" onclick="closeSidebar()"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2 style="color: var(--accent);">SA Master</h2>
            <p style="font-size: 0.8rem; color: var(--text-muted);">7th Sem ‚Ä¢ RGPV</p>
            <input type="text" id="search" class="search-box" placeholder="Search..." onkeyup="filterContent()">
        </div>
        <ul class="toc-list" id="toc">
            </ul>
    </aside>

    <div class="mobile-header">
        <button class="menu-btn" onclick="openSidebar()">‚ò∞</button>
        <div class="toolbar">
            <button class="btn" onclick="expandAll()">Expand All</button>
            <button class="btn" onclick="collapseAll()">Collapse All</button>
            <button class="btn" id="btnRevision" onclick="toggleMode('revision')">üìù Revision</button>
            <button class="btn" id="btnDiagrams" onclick="toggleMode('diagrams')">üñºÔ∏è Diagrams</button>
            <button class="btn" onclick="exportTxt()">üíæ Save Text</button>
        </div>
    </div>

    <main class="main">
        <div class="hero" style="margin-bottom: 2rem;">
            <h1>Software Architecture</h1>
            <p>Exam Master Notes ‚Ä¢ Offline Ready</p>
        </div>

        <div id="content-area">
            </div>

        <footer style="text-align: center; padding: 2rem; color: var(--border); font-size: 0.8rem;">
            Generated for Mobile ‚Ä¢ 2025
        </footer>
    </main>

<script>
// --- Data ---
const questions = [
    {
        id: 1,
        title: "Evolution of Architecture",
        time: "20 min",
        mnemonic: "M.C.D.S.",
        summary: "From Monoliths to Microservices.",
        definition: "<strong>Evolution</strong> traces the shift from single-unit <strong>Monolithic</strong> systems to loosely coupled <strong>Distributed</strong> systems.",
        ascii: `
[Monolith] -> [Client-Server] -> [Microservices]
   |              |                  |
 Single          2-Tier            Many
`,
        drawTip: "Draw a timeline showing blocks getting smaller and more numerous.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 100"><rect x="10" y="30" width="50" height="50" rx="4" fill="none" stroke="currentColor"/><text x="35" y="60" text-anchor="middle" font-size="10">Mono</text><line x1="70" y1="55" x2="100" y2="55" stroke="currentColor" marker-end="url(#arrow)"/><rect x="110" y="20" width="40" height="30" fill="none" stroke="currentColor"/><rect x="110" y="60" width="40" height="30" fill="none" stroke="currentColor"/><text x="130" y="40" text-anchor="middle" font-size="8">C</text><text x="130" y="80" text-anchor="middle" font-size="8">S</text><line x1="160" y1="55" x2="190" y2="55" stroke="currentColor" marker-end="url(#arrow)"/><rect x="200" y="20" width="20" height="20" fill="none" stroke="currentColor"/><rect x="230" y="20" width="20" height="20" fill="none" stroke="currentColor"/><rect x="200" y="50" width="20" height="20" fill="none" stroke="currentColor"/><rect x="230" y="50" width="20" height="20" fill="none" stroke="currentColor"/><text x="225" y="90" text-anchor="middle" font-size="10">Micro</text></svg>`,
        body: `<h3>1. Evolution Stages</h3><ul><li><strong>Monolithic:</strong> One big file. Fast but hard to scale.</li><li><strong>Client-Server:</strong> Split UI (Client) and Data (Server).</li><li><strong>Distributed/SOA:</strong> Services talking over network.</li><li><strong>Microservices:</strong> Tiny, independent services (Netflix style).</li></ul>`,
        example: "Netflix moved from a Monolith (one error crashes everything) to Microservices (one error only stops recommendations).",
        checklist: ["Monolith defined", "Client-Server split", "Distributed scaling", "Microservices agility"],
        forget: ["The driver was internet scale.", "Vertical vs Horizontal scaling."],
        wording: "Architecture evolved from centralized monoliths to decentralized distributed systems to handle scale.",
        cheatsheet: ["M.C.D.S.", "Monolith=One", "Distributed=Network", "Scaling Up vs Out"]
    },
    {
        id: 2,
        title: "Quality Models (ISO 9126)",
        time: "15 min",
        mnemonic: "FRUEMP",
        summary: "How we measure if software is 'Good'.",
        definition: "<strong>ISO 9126</strong> defines 6 characteristics for software quality: Functionality, Reliability, Usability, Efficiency, Maintainability, Portability.",
        ascii: `
    [ ISO 9126 ]
         |
  F-R-U-E-M-P
`,
        drawTip: "Tree diagram with ISO 9126 at top and 6 branches.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 80"><rect x="120" y="5" width="60" height="20"/><text x="150" y="20" text-anchor="middle" font-size="10">ISO 9126</text><line x1="10" y1="40" x2="290" y2="40" stroke="currentColor"/><line x1="150" y1="25" x2="150" y2="40" stroke="currentColor"/><text x="15" y="60" font-size="10">F</text><text x="70" y="60" font-size="10">R</text><text x="125" y="60" font-size="10">U</text><text x="180" y="60" font-size="10">E</text><text x="235" y="60" font-size="10">M</text><text x="290" y="60" font-size="10">P</text></svg>`,
        body: `<h3>The FRUEMP Model</h3><ol><li><strong>Functionality:</strong> Does it work? (Security)</li><li><strong>Reliability:</strong> Does it crash? (Recovery)</li><li><strong>Usability:</strong> Is it easy? (Learning)</li><li><strong>Efficiency:</strong> Is it fast? (Resources)</li><li><strong>Maintainability:</strong> Easy to fix? (Testing)</li><li><strong>Portability:</strong> Works on Mobile? (Install)</li></ol>`,
        example: "Banking apps prioritize Security (F) and Reliability (R). Games prioritize Efficiency (E).",
        checklist: ["FRUEMP acronym", "Security is Functionality", "Time behavior is Efficiency"],
        forget: ["Sub-characteristics.", "Methodology vs Quality Model difference."],
        wording: "ISO 9126 standardizes quality into six characteristics: Functionality, Reliability, Usability, Efficiency, Maintainability, and Portability.",
        cheatsheet: ["FRUEMP", "Func", "Rel", "Use", "Eff", "Main", "Port"]
    },
    {
        id: 3,
        title: "Architecture Business Cycle",
        time: "18 min",
        mnemonic: "Cycle Loop",
        summary: "Business drives Arch, Arch changes Business.",
        definition: "The <strong>ABC</strong> describes the feedback loop where organizational goals drive architecture, and the resulting system creates new opportunities that change those goals.",
        ascii: `
Goals -> Arch -> System
  ^                 |
  |____Feedback_____|
`,
        drawTip: "Clockwise circle: Org -> Arch -> System -> Back to Org.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 100"><rect x="10" y="40" width="60" height="30"/><text x="40" y="60" text-anchor="middle" font-size="10">Org</text><line x1="40" y1="40" x2="70" y2="20" stroke="currentColor"/><rect x="120" y="10" width="60" height="30"/><text x="150" y="30" text-anchor="middle" font-size="10">Arch</text><line x1="180" y1="25" x2="230" y2="40" stroke="currentColor"/><rect x="230" y="40" width="60" height="30"/><text x="260" y="60" text-anchor="middle" font-size="10">Sys</text><path d="M260 70 Q 150 100 40 70" fill="none" stroke="currentColor" stroke-dasharray="4"/><text x="150" y="95" text-anchor="middle" font-size="10">Feedback</text></svg>`,
        body: `<h3>The Cycle</h3><p>1. <strong>Inputs:</strong> Stakeholders, Tech, and Organization limitations (Conway's Law).</p><p>2. <strong>Output:</strong> The System.</p><p>3. <strong>Feedback:</strong> The system teaches the company new skills and opens new markets, changing the inputs for the next round.</p>`,
        example: "Amazon built a system to sell books. The system was so good (AWS) it changed their business goal to selling Cloud Services.",
        checklist: ["Stakeholders", "Conway's Law", "Feedback Loop", "Inputs/Outputs"],
        forget: ["System changes the organization.", "Tech Environment influence."],
        wording: "Architecture is a result of business goals, but its existence subsequently alters the business environment.",
        cheatsheet: ["ABC=Loop", "Input=Stakeholders", "Output=System", "Feedback changes Org"]
    },
    {
        id: 6,
        title: "Pipes and Filters Style",
        time: "15 min",
        mnemonic: "Stream Processing",
        summary: "Data flows through independent processing steps.",
        definition: "<strong>Pipes and Filters</strong> is an architecture where data passes through processing units (Filters) connected by buffers (Pipes).",
        ascii: `
[Read] -> (Pipe) -> [Process] -> (Pipe) -> [Write]
`,
        drawTip: "Boxes connected by arrows.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 60"><rect x="10" y="15" width="50" height="30"/><text x="35" y="35" text-anchor="middle" font-size="10">F1</text><line x1="60" y1="30" x2="100" y2="30" stroke="currentColor"/><text x="80" y="20" text-anchor="middle" font-size="8">Pipe</text><rect x="100" y="15" width="50" height="30"/><text x="125" y="35" text-anchor="middle" font-size="10">F2</text><line x1="150" y1="30" x2="190" y2="30" stroke="currentColor"/><text x="170" y="20" text-anchor="middle" font-size="8">Pipe</text><rect x="190" y="15" width="50" height="30"/><text x="215" y="35" text-anchor="middle" font-size="10">F3</text></svg>`,
        body: `<h3>Components</h3><ul><li><strong>Filter:</strong> Transforms data. Independent.</li><li><strong>Pipe:</strong> Moves data. Buffers it.</li></ul><h3>Pros/Cons</h3><p><strong>Pros:</strong> Reusable, Parallel processing. <strong>Cons:</strong> Data parsing overhead.</p>`,
        checklist: ["Independent Filters", "Buffers", "Unix/Compiler example"],
        forget: ["Filters don't share state.", "Batch sequential variant."],
        wording: "Decomposes tasks into independent data processing steps connected by pipes.",
        cheatsheet: ["Stream", "Filter=Logic", "Pipe=Buffer", "Unix Example"]
    },
    {
        id: 7,
        title: "REST Constraints",
        time: "15 min",
        mnemonic: "SCCLUC",
        summary: "6 Rules for Web APIs.",
        definition: "<strong>REST</strong> is defined by 6 constraints: Stateless, Client-Server, Cacheable, Layered, Uniform Interface, Code on Demand.",
        ascii: `
Client <-> [Cache] <-> Server
   |          |          |
Stateless   Layered    Uniform
`,
        drawTip: "Client/Server with Cache block in middle.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 80"><rect x="20" y="20" width="50" height="40"/><text x="45" y="45" text-anchor="middle" font-size="10">Cli</text><line x1="70" y1="40" x2="110" y2="40" stroke="currentColor"/><rect x="110" y="20" width="50" height="40" stroke-dasharray="4" fill="none" stroke="currentColor"/><text x="135" y="45" text-anchor="middle" font-size="10">Cache</text><line x1="160" y1="40" x2="200" y2="40" stroke="currentColor"/><rect x="200" y="20" width="50" height="40"/><text x="225" y="45" text-anchor="middle" font-size="10">Svr</text><text x="135" y="75" text-anchor="middle" font-size="10" fill="var(--accent)">Stateless</text></svg>`,
        body: `<h3>The 6 Rules</h3><ol><li><strong>Stateless:</strong> Server stores no session. Request has all info.</li><li><strong>Client-Server:</strong> UI separated from Data.</li><li><strong>Cacheable:</strong> Responses marked as saveable.</li><li><strong>Layered:</strong> Can use load balancers.</li><li><strong>Uniform Interface:</strong> Standard URLs (GET/POST).</li><li><strong>Code on Demand:</strong> (Optional) JS.</li></ol>`,
        checklist: ["SCCLUC", "Stateless defined", "Uniform Interface"],
        forget: ["Code on Demand is optional.", "Why Stateless scales."],
        wording: "REST relies on a stateless, client-server protocol ensuring scalability and reliability.",
        cheatsheet: ["SCCLUC", "Stateless", "Cacheable", "Layered", "Uniform"]
    },
    {
        id: 9,
        title: "Microservices",
        time: "20 min",
        mnemonic: "Indep. Deployment",
        summary: "Small services, own DB, talk over network.",
        definition: "<strong>Microservices</strong> structure an app as a collection of loosely coupled services organized around business capabilities.",
        ascii: `
   [Gateway]
    /     \
 [Svc A] [Svc B]
    |       |
  (DB)    (DB)
`,
        drawTip: "Gateway at top, services below, EACH with own DB.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 100"><rect x="110" y="5" width="80" height="25"/><text x="150" y="22" text-anchor="middle" font-size="10">Gateway</text><line x1="130" y1="30" x2="80" y2="50" stroke="currentColor"/><line x1="170" y1="30" x2="220" y2="50" stroke="currentColor"/><rect x="50" y="50" width="60" height="25"/><text x="80" y="67" text-anchor="middle" font-size="10">User Svc</text><circle cx="80" cy="85" r="8" fill="none" stroke="currentColor"/><rect x="190" y="50" width="60" height="25"/><text x="220" y="67" text-anchor="middle" font-size="10">Order Svc</text><circle cx="220" cy="85" r="8" fill="none" stroke="currentColor"/></svg>`,
        body: `<h3>Key Traits</h3><ul><li><strong>Database per Service:</strong> No shared DBs.</li><li><strong>Independently Deployable:</strong> Fix one without breaking all.</li><li><strong>Polyglot:</strong> Mix Java, Python, Node.</li></ul><h3>Pros/Cons</h3><p>Great for scaling, bad for complexity.</p>`,
        checklist: ["DB per Service", "Smart endpoints/Dumb pipes", "Decoupled"],
        forget: ["Testing is harder.", "Eventual consistency."],
        wording: "Decomposition into loosely coupled, independently deployable services.",
        cheatsheet: ["Small", "Independent", "Own DB", "Polyglot"]
    },
    {
        id: 14,
        title: "MVC Pattern",
        time: "15 min",
        mnemonic: "Sep of Concerns",
        summary: "Splits UI, Logic, and Data.",
        definition: "<strong>MVC</strong> separates the application into <strong>Model</strong> (Data), <strong>View</strong> (UI), and <strong>Controller</strong> (Logic).",
        ascii: `
User -> [Controller] -> [Model]
            |              |
          [View] <---------+
`,
        drawTip: "Triangle: Controller updates Model, Model updates View, View shows User.",
        svgContent: `<svg class="diagram" viewBox="0 0 250 100"><rect x="95" y="10" width="60" height="25"/><text x="125" y="27" text-anchor="middle" font-size="10">Model</text><rect x="20" y="60" width="60" height="25"/><text x="50" y="77" text-anchor="middle" font-size="10">View</text><rect x="170" y="60" width="60" height="25"/><text x="200" y="77" text-anchor="middle" font-size="10">Contrl</text><line x1="200" y1="60" x2="155" y2="35" stroke="currentColor" marker-end="url(#arrow)"/><line x1="95" y1="35" x2="50" y2="60" stroke="currentColor" stroke-dasharray="4"/></svg>`,
        body: `<h3>The Trio</h3><ul><li><strong>Model:</strong> Business data/rules. Knows nothing of UI.</li><li><strong>View:</strong> Displays data. Observes Model.</li><li><strong>Controller:</strong> Handles Input. Updates Model.</li></ul>`,
        checklist: ["Separation of concerns", "Parallel dev", "Web standard"],
        forget: ["Model does not depend on View.", "Controller handles input."],
        wording: "MVC decouples the user interface from the underlying data logic.",
        cheatsheet: ["Model=Data", "View=UI", "Controller=Logic", "Decoupled"]
    },
    {
        id: 19,
        title: "ATAM (Tradeoff Analysis)",
        time: "20 min",
        mnemonic: "Risk & Tradeoff",
        summary: "Testing architecture with scenarios.",
        definition: "<strong>ATAM</strong> evaluates architecture against quality goals to find <strong>Risks</strong>, <strong>Sensitivity Points</strong>, and <strong>Trade-offs</strong>.",
        ascii: `
[Arch] + [Scenarios] -> (ATAM) -> [Risks]
`,
        drawTip: "Funnel: Inputs (Arch, Scenarios) go in, Risks come out.",
        svgContent: `<svg class="diagram" viewBox="0 0 300 60"><rect x="10" y="20" width="60" height="30"/><text x="40" y="40" text-anchor="middle" font-size="8">Arch</text><line x1="70" y1="35" x2="100" y2="35" stroke="currentColor"/><circle cx="130" cy="35" r="20" fill="none" stroke="currentColor"/><text x="130" y="40" text-anchor="middle" font-size="8">Eval</text><line x1="150" y1="35" x2="190" y2="35" stroke="currentColor" marker-end="url(#arrow)"/><rect x="190" y="20" width="80" height="30" stroke-dasharray="4" fill="none" stroke="currentColor"/><text x="230" y="40" text-anchor="middle" font-size="10">Risks</text></svg>`,
        body: `<h3>Outputs</h3><ul><li><strong>Risks:</strong> What might fail?</li><li><strong>Sensitivity:</strong> Small change = Big impact.</li><li><strong>Trade-offs:</strong> Better Security = Worse Speed.</li></ul><h3>Method</h3><p>Uses <strong>Scenarios</strong> (Use cases) to test the design.</p>`,
        checklist: ["Risks", "Sensitivity", "Trade-offs", "Scenarios"],
        forget: ["It doesn't fix issues, just finds them.", "Stakeholders involved."],
        wording: "ATAM uses quality scenarios to identify architectural risks and trade-offs.",
        cheatsheet: ["ATAM", "Risks", "Trade-offs", "Sensitivity", "Scenarios"]
    }
];

// --- Logic ---

function renderQuestions() {
    const container = document.getElementById('content-area');
    const toc = document.getElementById('toc');
    
    questions.forEach(q => {
        // TOC
        const tocItem = document.createElement('li');
        tocItem.className = 'toc-item';
        tocItem.innerHTML = `<a href="#q${q.id}" onclick="closeSidebar()">Q${q.id}: ${q.title}</a>`;
        toc.appendChild(tocItem);

        // Content
        const card = document.createElement('div');
        card.className = 'question-block';
        card.id = `q${q.id}`;
        
        card.innerHTML = `
            <div class="q-header">
                <div class="q-title">Q${q.id}: ${q.title}</div>
                <div class="q-meta">
                    <span>${q.time}</span>
                    <span>${q.mnemonic}</span>
                </div>
            </div>
            
            <div class="deep-content">
                <div style="margin-bottom:1rem; font-size:1rem;">${q.definition}</div>
                <div style="font-size:0.9rem; color:var(--accent); margin-bottom:1rem;"><em>${q.summary}</em></div>
            </div>

            <div class="vis-box">
                <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                    <span style="font-size:0.7rem; font-weight:bold; color:var(--text-muted);">ASCII</span>
                    <span style="font-size:0.7rem; color:var(--warning);">Tip: ${q.drawTip}</span>
                </div>
                <pre class="ascii-art">${q.ascii.trim()}</pre>
            </div>
            
            <div class="vis-box">
                 <div style="font-size:0.7rem; font-weight:bold; color:var(--text-muted); margin-bottom:5px;">DIAGRAM</div>
                ${q.svgContent}
            </div>

            <div class="deep-content">
                ${q.body}
                ${q.example ? `<div style="margin-top:1rem; padding:0.8rem; background:rgba(255,255,255,0.05); border-radius:6px; font-size:0.9rem;"><strong>üí° Ex:</strong> ${q.example}</div>` : ''}
            </div>

            <div class="deep-content">
                <div class="checklist-box">
                    <h4 style="font-size:0.9rem; margin-bottom:0.5rem; color:var(--success);">Key Points:</h4>
                    <ul style="padding-left:1rem; font-size:0.9rem;">${q.checklist.map(i => `<li>${i}</li>`).join('')}</ul>
                </div>
                <div class="wording-box">
                    <strong>Write this:</strong> "${q.wording}"
                </div>
            </div>

            <div class="cheat-sheet">
                <div class="cs-header" onclick="this.nextElementSibling.classList.toggle('show')">
                    <span>Cheat Sheet</span> <span>‚ñº</span>
                </div>
                <div class="cs-body">
                    <ul>${q.cheatsheet.map(i => `<li>${i}</li>`).join('')}</ul>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

// UI Functions
function openSidebar() {
    document.getElementById('sidebar').classList.add('active');
    document.querySelector('.overlay').classList.add('active');
}

function closeSidebar() {
    document.getElementById('sidebar').classList.remove('active');
    document.querySelector('.overlay').classList.remove('active');
}

function toggleMode(mode) {
    const body = document.body;
    body.classList.remove('revision-mode', 'diagrams-only');
    document.getElementById('btnRevision').classList.remove('active');
    document.getElementById('btnDiagrams').classList.remove('active');

    if(mode === 'revision') {
        body.classList.add('revision-mode');
        document.getElementById('btnRevision').classList.add('active');
        expandAll();
    } else if (mode === 'diagrams') {
        body.classList.add('diagrams-only');
        document.getElementById('btnDiagrams').classList.add('active');
    }
}

function expandAll() { document.querySelectorAll('.cs-body').forEach(el => el.classList.add('show')); }
function collapseAll() { document.querySelectorAll('.cs-body').forEach(el => el.classList.remove('show')); }

function filterContent() {
    const term = document.getElementById('search').value.toLowerCase();
    questions.forEach(q => {
        const el = document.getElementById(`q${q.id}`);
        const text = (q.title + q.mnemonic).toLowerCase();
        el.style.display = text.includes(term) ? 'block' : 'none';
    });
}

function exportTxt() {
    let txt = "SA MOBILE NOTES\n\n";
    questions.forEach(q => {
        txt += `Q${q.id}: ${q.title}\n${q.definition}\n\nMnemonic: ${q.mnemonic}\n----------------\n`;
    });
    const blob = new Blob([txt], {type: 'text/plain'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'SA_Mobile_Notes.txt';
    a.click();
}

// Init
renderQuestions();

</script>
</body>
</html>
